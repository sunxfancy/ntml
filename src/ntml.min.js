function is_html_tag(t){return contain_html(t,0,html_tag_collection.length)}function contain_html(t,e,n){if(e>=n)return!1;var a=parseInt((e+n)/2);return html_tag_collection[a]==t?!0:html_tag_collection[a]<t?contain_html(t,a+1,n):contain_html(t,e,a)}function loaddone(t){nt.parse(t),nt.callback(nt.html,t)}var html_tag_collection=["a","abbr","acronym","address","applet","area","b","base","basefont","bdo","big","blockquote","body","br","button","caption","center","cite","code","col","colgroup","dd","del","dfn","dir","div","dl","dt","em","fieldset","font","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","map","menu","meta","noframes","noscript","object","ol","optgroup","option","p","param","pre","q","s","samp","script","select","small","span","strike","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","tt","u","ul","var"],NTML=function(){};NTML.prototype={data:null,html:"",callback:null,parse:function(t){this.data=t;var e=$.parseXML(this.data);$xml=$(e);var n=$xml.contents()[0];return this.html=this.parse_node_children($(n)),this.html},parse_nt:function(t){var e=t.prop("tagName"),n=t.prop("attributes"),a={};a.content="";for(var r=t.contents(),o=0;o<r.length;o++){var l=r[o];$child=$(l);var i=$child.prop("tagName");if(void 0===i||null==i){var s=$child.text();(null==s||void 0===s)&&(s=""),a.content+=s}else if("params"==i.toLowerCase()){var h=$child.prop("attributes");this.make_data(a,h)}else"a-"==i.substring(0,2)?a[i.substring(2)]=this.parse_node_children($child):a.content+=this.parse_node($child)}var c='<?xml version="1.0" encoding="utf-8" ?>\n';return c+="<ntml>\n",c+=this.make_html_header("div",n),c+=template(e,a),c+=this.make_html_footer("div"),c+="</ntml>\n",this.parse(c)},parse_node_children:function(t){for(var e=t.contents(),n="",a=0;a<e.length;a++){var r=e[a];n+=this.parse_node($(r))}return n},parse_node:function(t){var e=t.prop("tagName");if(void 0===e||null==e){var n=t.text();return(null==n||void 0===n)&&(n=""),n}if(e.length>3&&"nt-"==e.substring(0,3)||!is_html_tag(e))return this.parse_nt(t);var a=t.prop("attributes"),r="";r+=this.make_html_header(e,a);for(var o=t.contents(),l=0;l<o.length;l++){var i=o[l];r+=this.parse_node($(i))}return r+=this.make_html_footer(e)},make_data:function(t,e){for(var n=e.length-1;n>=0;n--){var a=e[n];t[a.nodeName]=a.nodeValue}},make_html_header:function(t,e){var n="<";n+=t;for(var a=0;a<e.length;a++)n+=" "+e[a].nodeName+'="'+e[a].nodeValue+'"';return n+=">\n"},make_html_footer:function(t){return"</"+t+">\n"},load:function(t,e){this.callback=e,$.ajax({url:t,type:"GET",dataType:"text",timeout:1e3,cache:!0,error:function(){alert("加载XML文档出错!")},success:loaddone})}};var nt=new NTML;